"""

Add your own eclass templates here. Use this format:


To add a "command":

    AddCommand("inherit kde-base")


To add a variable:

    AddNewVar("VAR_NAME", "value")


To add a function set the body of the function in a variable.
Use \t to indent and triple quotes:

    srcinst = '''
src_install() {
\tmake DESTDIR=${D} install || die
}
'''

    AddFunc("src_install", (srcinst))


Follow the examples below. Make sure you prefix the name
you want in the menu with "my". For instance:

def myGnome(utils):

will show as "Gnome" in the menu.


"""


def myGames(parent):
    """Add games.eclass stuff"""

    from utils import AddNewVar, AddCommand, AddFunc

    AddCommand(parent, "inherit games")

    src_compile="""
src_compile() {
\tegamesconf
\temake
}"""

    AddFunc(parent, "src_compile", (src_compile))

    src_install="""
src_install() {
\t#make DESTDIR=${D} install || die\
\tegamesinstall || die
\tprepgamesdirs
}"""
    AddFunc(parent, "src_install", (src_install))


def myDistutils(parent):
    """Add Python distutils-related variables, inherit etc."""
    # You don't need src_install() with distutils because it gets called automatically.
    # We add it in case they want to add anything to it.

    from utils import AddNewVar, AddCommand, AddFunc

    AddCommand(parent, "inherit distutils")

    src_install ="""
src_install() {
\tdistutils_src_install
}"""

    AddFunc(parent, "src_install", (src_install))

def myCVS(parent):
    """Add CVS-related variables, inherit etc."""

    from utils import AddNewVar, AddCommand, AddFunc

    src_compile ="""src_compile() {
\texport WANT_AUTOCONF_2_5=1
\tsh autogen.sh
\teconf || die 'configure failed'
\temake || die 'parallel make failed'
}"""

    src_install ="""src_install() {
\teinstall || die 'make install failed'
}"""

    AddNewVar(parent, "ECVS_SERVER", "")
    parent.varOrder.append("ECVS_SERVER")
    AddNewVar(parent, "ECVS_MODULE", "")
    parent.varOrder.append("ECVS_MODULE")
    AddNewVar(parent, "ECVS_TOD_DIR", "$DIST/")
    parent.varOrder.append("ECVS_TOD_DIR")
    parent.panelMain.S.SetValue("${WORKDIR}/${PN/-cvs/}")
    AddCommand(parent, "\ninherit cvs")
    AddFunc(parent, "src_compile", (src_compile))
    AddFunc(parent, "src_install", (src_install))

def myCVSGames(parent):
    """Add CVS-related variables, inherit games etc."""

    from utils import AddNewVar, AddCommand, AddFunc

    src_unpack = """src_unpack() {
\t#If you don't have aditional files to unpack in SRC_URI
\t#you can delete this function
\tunpack ${A}
\tcvs_src_unpack
\tcd ${S}
}"""

    src_compile = """src_compile() {
\texport WANT_AUTOCONF_2_5=1
\tif [ -x ./autogen.sh ] ; then
\t\t/bin/bash ./autogen.sh
\t\t\t--prefix=${GAMES_PREFIX}
\t\t\t--host=${CHOST}
\t\t\t--mandir=/usr/share/man
\t\t\t--infodir=/usr/share/info
\t\t\t--datadir=${GAMES_DATADIR}
\t\t\t--sysconfdir=${GAMES_SYSCONFDIR}
\t\t\t--localstatedir=${GAMES_STATEDIR}
\t\t\t"$@" || die "autogen.sh failed"
\telse
\t\tdie "no autogen.sh script found"
\tfi
\temake || die 'parallel make failed'
}"""

    src_install = """src_install() {
\teinstall || die
\tprepgamesdirs
}"""
    AddCommand(parent, "inherit cvs games")
    AddNewVar(parent, "ECVS_SERVER", "")
    parent.varOrder.append("ECVS_SERVER")
    AddNewVar(parent, "ECVS_MODULE", "")
    varOrder.append("ECVS_MODULE")
    AddNewVar(parent, "ECVS_USER", "")
    parent.varOrder.append("ECVS_USER")
    AddNewVar(parent, "ECVS_PASS", "")
    parent.varOrder.append("ECVS_PASS")
    parent.panelMain.S.SetValue("${WORKDIR}/${PN/-cvs/}")
    AddFunc(parent, "src_unpack", (src_unpack))
    AddFunc(parent, "src_compile", (src_compile))
    AddFunc(parent, "src_install", (src_install))
